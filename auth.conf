{
	instances = {
		#include f"datasource.conf"
		
		loggedin = Return("authenticated") {
			default_branch = Template(f"templates/LoginSuccess.html");
		};

		identify = Module(f"login.conf@identify") {
			identified_branch = MySqlQuerier(f"queries/SetSessionLogin.sql", 
				params = ["session", "login"], credset = "login"
			) {
				successful_branch = instances.loggedin;
			};
		};

		enticate = Module(f"session.conf@ize") {
			ized_branch = MySqlQuerier(f"queries/GetSessionLogin.sql", 
				params = ["session"], credset = "login"
			) {
				none_branch = Return("unauthenticated") {
					default_branch = instances.identify;
				};
				single_branch = instances.loggedin;
			};
		};

		end = Module(f"session.conf@stop") {
			stopped_branch = MySqlQuerier(f"queries/StopSessionLogin.sql",
				params = ["session"]) {
				successful_branch = Template(f"templates/LoggedOut.html");
			};
		};

		enticatedbg = instances.enticate;

		register = StubService();
	};
} 